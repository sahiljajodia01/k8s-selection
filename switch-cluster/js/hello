

import $ from 'jquery';
import dialog from 'base/js/dialog';
import Jupyter from 'base/js/namespace';
import events from 'base/js/events';
import keyboard from 'base/js/keyboard';
import utils from 'base/js/utils';
import configmod from 'services/config';


function Switchcluster() {
    this.states = {
        basic: $.proxy(this.get_basic, this),
        buttons: {
            'Select Cluster': {
                class: 'btn-success size-100',
                click: $.proxy(this.select_cluster, this)
            }
        }
    };

    console.log('Switch Cluster start');

    this.comm = null;

    this.options = this.get_notebook_metadata();

    this.add_toolbar_button();
}

Switchcluster.prototype.add_toolbar_button = function () {
    let action = {
        help: 'Switch Spark K8s cluster',
        help_index: 'zz', // Sorting Order in keyboard shortcut dialog
        handler: $.proxy(this.open_modal, this)
    };

    var prefix = 'SwitchCluster';
    var action_name = 'show-cluster-dropdown';

    let full_action_name = Jupyter.actions.register(action, action_name, prefix);
    this.toolbar_button = Jupyter.toolbar.add_buttons_group([full_action_name]).find('.btn');
    this.toolbar_button.addClass('disabled spark-icon');
    this.enabled = true;

};



function load_ipython_extension() {

    var conn = new Switchcluster();
    conn.add_toolbar_button();
}

export {load_ipython_extension}











define([
    'base/js/namespace'
], function(
    Jupyter
) {
    function load_ipython_extension() {

        var handler = function () {
            alert('this is an alert from my_extension!');
        };

        var action = {
            icon: 'fa-comment-o', // a font-awesome class used on buttons, etc
            help    : 'Show an alert',
            help_index : 'zz',
            handler : handler
        };
        var prefix = 'my_extension';
        var action_name = 'show-alert';

        var full_action_name = Jupyter.actions.register(action, action_name, prefix); // returns 'my_extension:show-alert'
        Jupyter.toolbar.add_buttons_group([full_action_name]);

        console.log("Loaded Swithcluster extension!!")
    }

    return {
        load_ipython_extension: load_ipython_extension
    };
});











function load_ipython_extension() {

    var handler = function () {
        // console.log("hdfsbrowser: ", Jupyter.notebook.base_url)
        var iframe = $('\
                <div style="overflow:hidden">\
                <iframe src="'+ Jupyter.notebook.base_url + 'hdfsbrowser/explorer.html' + '" frameborder="0" scrolling="yes" class="hdfsbrowserframe">\
                </iframe>\
                </div>\
                ');
        iframe.find('.hdfsbrowserframe').width('100%');
        iframe.find('.hdfsbrowserframe').height('100%');
        iframe.dialog({
            title: "HDFS Browser",
            width: 1000,
            height: 500,
            autoResize: true,
            dialogClass: "hdfs-browser-dialog"
        });
    };

    var action = {
        help: 'hdfs browser',
        help_index: 'zz',
        handler: handler
    };

    var prefix = 'hdfs_browser';
    var action_name = 'open-iframe';

    var full_action_name = Jupyter.actions.register(action, action_name, prefix); // returns 'hdfs_browser:open-iframe'
    this.toolbar_button = Jupyter.toolbar.add_buttons_group([full_action_name]).find('.btn');
    this.toolbar_button.addClass('hadoop-icon');
}

export { load_ipython_extension }